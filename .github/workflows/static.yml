# Arquivo: .github/workflows/static.yml

name: Deploy de Projeto Compilado (Build)

on:
  push:
    branches:
      - principais # Executa sempre que há commit no branch 'principais'

jobs:
  build_and_deploy:
    runs-on: ubuntu-latest
    
    steps:
      - name: Checkout do Código
        uses: actions/checkout@v4

      # 1. Configura o ambiente Node.js
      - name: Setup Node.js
        uses: actions/setup-node@v4
        with:
          node-version: '20' # Versão recomendada do Node. Mude se seu projeto precisar de outra.

      # 2. Instala as dependências (lê o package.json e instala o que precisa)
      - name: Instalar Dependências
        run: npm install 

      # 3. Compila o projeto (comando npm run build)
      - name: Construir Projeto
        run: npm run build 

      # 4. Configura o GitHub Pages
      - name: Configurar GitHub Pages
        uses: actions/configure-pages@v4
        with:
          static_site_generator: 'none'

      # 5. Faz o Upload do Artefato (a pasta 'build' que contém o index.html final)
      - name: Upload Artifact
        uses: actions/upload-pages-artifact@v3
        with:
          path: './build' # *** ATENÇÃO: Se a pasta de saída do seu projeto for 'dist', troque './build' por './dist' ***

      # 6. Publica no GitHub Pages
      - name: Deploy para GitHub Pages
        id: deployment
        uses: actions/deploy-pages@v4
